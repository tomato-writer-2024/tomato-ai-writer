# ç•ªèŒ„AIå†™ä½œåŠ©æ‰‹ - æœ¬åœ°éƒ¨ç½²å®Œæ•´æŒ‡å—

> **ä»Cozeæ²™ç®±åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´æ­¥éª¤**

---

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### ä½ éœ€è¦å‡†å¤‡ï¼š
- âœ… ç”µè„‘ä¸Šå®‰è£… Gitï¼šhttps://git-scm.com/downloads
- âœ… ç”µè„‘ä¸Šå®‰è£… Node.jsï¼šhttps://nodejs.org/ ï¼ˆæ¨è18.xæˆ–20.xï¼‰
- âœ… GitHubè´¦å·ï¼štomato-writer-2024
- âœ… Vercelè´¦å·
- âœ… Supabaseè´¦å·

---

## ç¬¬ä¸€æ­¥ï¼šä¸‹è½½ä»£ç 

### æ–¹å¼1ï¼šä¸‹è½½å‹ç¼©åŒ…ï¼ˆæ¨èï¼‰

1. **åœ¨Cozeæ²™ç®±ä¸­**ï¼Œä»£ç å·²ç»æ‰“åŒ…æˆ `tomato-ai-writer.tar.gz`
2. é€šè¿‡Cozeçš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½ä¸‹è½½åˆ°æœ¬åœ°ç”µè„‘
3. è§£å‹æ–‡ä»¶ï¼š
   - Windows: ä½¿ç”¨ 7-Zip æˆ– WinRAR
   - Mac/Linux: `tar -xzf tomato-ai-writer.tar.gz`

### æ–¹å¼2ï¼šç›´æ¥åœ¨GitHubåˆ›å»ºï¼ˆæœ€ç®€å•ï¼‰

å¦‚æœä¸‹è½½æœ‰å›°éš¾ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨GitHubåˆ›å»ºä¸€ä¸ªç©ºä»“åº“ï¼Œç„¶åæ‰‹åŠ¨ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶ã€‚

---

## ç¬¬äºŒæ­¥ï¼šåœ¨GitHubåˆ›å»ºä»“åº“

### åˆ›å»ºæ­¥éª¤ï¼š

1. **è®¿é—®**ï¼šhttps://github.com/new

2. **å¡«å†™ä¿¡æ¯**ï¼š
   - Repository name: `tomato-ai-writer`
   - Description: ç•ªèŒ„å°è¯´AIå†™ä½œåŠ©æ‰‹ - AIèµ‹èƒ½çš„å°è¯´åˆ›ä½œå·¥å…·
   - Public/Private: é€‰æ‹© **Public**ï¼ˆå…¬å¼€ï¼Œå…è´¹ï¼‰
   - **ä¸è¦å‹¾é€‰**ï¼š
     - â˜ Add a README file
     - â˜ Add .gitignore
     - â˜ Choose a license

3. **ç‚¹å‡»** "Create repository"

4. **å¤åˆ¶ä»“åº“URL**ï¼š
   ```
   https://github.com/tomato-writer-2024/tomato-ai-writer.git
   ```

---

## ç¬¬ä¸‰æ­¥ï¼šåœ¨æœ¬åœ°æ¨é€ä»£ç 

### 3.1 å®‰è£…å¿…è¦çš„è½¯ä»¶

#### å®‰è£…Git
è®¿é—®ï¼šhttps://git-scm.com/downloads
ä¸‹è½½å¹¶å®‰è£…é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚

#### å®‰è£…Node.js
è®¿é—®ï¼šhttps://nodejs.org/
ä¸‹è½½å¹¶å®‰è£… LTS ç‰ˆæœ¬ï¼ˆæ¨è18.xæˆ–20.xï¼‰

#### å®‰è£…pnpm
æ‰“å¼€ç»ˆç«¯ï¼ˆWindowsç”¨PowerShellæˆ–CMDï¼ŒMacç”¨Terminalï¼‰ï¼Œæ‰§è¡Œï¼š

```bash
npm install -g pnpm
```

### 3.2 è·å–GitHub Personal Access Token

ç”±äºGitHubå·²å¼ƒç”¨å¯†ç ç™»å½•ï¼Œéœ€è¦ä½¿ç”¨Personal Access Tokenï¼š

1. **è®¿é—®**ï¼šhttps://github.com/settings/tokens
2. **ç‚¹å‡»** "Generate new token" â†’ "Generate new token (classic)"
3. **å¡«å†™**ï¼š
   - **Note**: `tomato-ai`
   - **Expiration**: é€‰æ‹© `90 days` æˆ– `No expiration`
   - **Select scopes**: å‹¾é€‰ **`repo`**ï¼ˆå±•å¼€åå‹¾é€‰å…¨éƒ¨ï¼‰
4. **ç‚¹å‡»** "Generate token"
5. **é‡è¦**ï¼šç«‹å³å¤åˆ¶ç”Ÿæˆçš„tokenï¼ˆç±»ä¼¼ `ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`ï¼‰
   - **åªæ˜¾ç¤ºä¸€æ¬¡**ï¼ŒåŠ¡å¿…ä¿å­˜å¥½ï¼

### 3.3 é…ç½®Git

åœ¨æœ¬åœ°ç”µè„‘çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼š

```bash
# é…ç½®ç”¨æˆ·å
git config --global user.name "tomato-writer-2024"

# é…ç½®é‚®ç®±
git config --global user.email "208343256@qq.com"

# éªŒè¯é…ç½®
git config --global --list
```

### 3.4 åˆå§‹åŒ–å¹¶æ¨é€ä»£ç 

å¦‚æœä½ å·²ç»ä¸‹è½½å¹¶è§£å‹äº†ä»£ç åŒ…ï¼š

```bash
# è¿›å…¥ä»£ç ç›®å½•
cd tomato-ai-writer

# åˆå§‹åŒ–Git
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤ä»£ç 
git commit -m "Initial commit: ç•ªèŒ„AIå†™ä½œåŠ©æ‰‹"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/tomato-writer-2024/tomato-ai-writer.git

# æ¨é€åˆ°GitHub
git branch -M main
git push -u origin main
```

**å½“æç¤ºè¾“å…¥å¯†ç æ—¶**ï¼š
- Username: `tomato-writer-2024`
- Password: `ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`ï¼ˆç²˜è´´ä½ çš„tokenï¼‰

---

## ç¬¬å››æ­¥ï¼šéªŒè¯ä»£ç æ¨é€æˆåŠŸ

è®¿é—®ï¼šhttps://github.com/tomato-writer-2024/tomato-ai-writer

ä½ åº”è¯¥èƒ½çœ‹åˆ°æ‰€æœ‰ä»£ç æ–‡ä»¶ï¼š
- package.json
- src/ ç›®å½•
- public/ ç›®å½•
- ç­‰ç­‰

---

## ç¬¬äº”æ­¥ï¼šéƒ¨ç½²åˆ°Vercel

### 5.1 ç™»å½•Vercel

1. **è®¿é—®**ï¼šhttps://vercel.com/
2. **ç‚¹å‡»** "Log in"
3. **é€‰æ‹©** "Continue with GitHub"
4. **æˆæƒ** Vercelè®¿é—®ä½ çš„GitHub

### 5.2 å¯¼å…¥é¡¹ç›®

1. **ç™»å½•å**ï¼Œä½ ä¼šçœ‹åˆ° "Deployments" é¡µé¢
2. **ç‚¹å‡»** "Add New" â†’ "Project"
3. **æ‰¾åˆ°**ä½ çš„ä»“åº“ `tomato-ai-writer`
4. **ç‚¹å‡»** "Import"

### 5.3 é…ç½®é¡¹ç›®

Vercelä¼šè‡ªåŠ¨æ£€æµ‹Next.jsé¡¹ç›®ï¼Œæ˜¾ç¤ºï¼š

- **Framework Preset**: Next.js âœ…
- **Root Directory**: `/` âœ…
- **Build Command**: `npm run build` âœ…
- **Output Directory**: `.next` âœ…

**ä¿æŒé»˜è®¤ï¼Œä¸éœ€è¦ä¿®æ”¹ï¼**

### 5.4 é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé‡è¦ï¼ï¼‰

åœ¨ "Environment Variables" éƒ¨åˆ†ï¼Œç‚¹å‡» "Add New"ï¼Œé€ä¸ªæ·»åŠ ï¼š

#### å¿…éœ€é…ç½®

| Name | Value | è¯´æ˜ |
|------|-------|------|
| `NODE_ENV` | `production` | ç”Ÿäº§ç¯å¢ƒ |
| `NEXT_PUBLIC_APP_NAME` | `ç•ªèŒ„å°è¯´AIå†™ä½œåŠ©æ‰‹` | åº”ç”¨åç§° |
| `NEXT_PUBLIC_BASE_URL` | `https://tomato-ai-writer.vercel.app` | ä¸´æ—¶URLï¼Œéƒ¨ç½²åä¿®æ”¹ |
| `JWT_SECRET` | `ç”Ÿæˆ32ä½éšæœºå­—ç¬¦ä¸²` | è§ä¸‹æ–¹ |
| `JWT_REFRESH_SECRET` | `ç”Ÿæˆ32ä½éšæœºå­—ç¬¦ä¸²` | è§ä¸‹æ–¹ |
| `DOUBAO_API_KEY` | `ä½ çš„è±†åŒ…API Key` | ä»ç«å±±å¼•æ“è·å– |
| `DOUBAO_MODEL` | `doubao-pro-4k` | è±†åŒ…æ¨¡å‹ |

**ç”ŸæˆJWTå¯†é’¥**ï¼š
è®¿é—®ï¼šhttps://www.uuidgenerator.net/api/guid
å¤åˆ¶ç”Ÿæˆçš„UUIDï¼Œç”¨äºä¸¤ä¸ªJWTå¯†é’¥é…ç½®ã€‚

#### æ•°æ®åº“é…ç½®ï¼ˆç¨åæ·»åŠ ï¼‰

å…ˆè·³è¿‡ `DATABASE_URL`ï¼Œæˆ‘ä»¬åé¢é…ç½®Supabaseåå†æ·»åŠ ã€‚

#### å¯é€‰é…ç½®ï¼ˆé‚®ä»¶æœåŠ¡ï¼‰

æš‚æ—¶ä¸é…ç½®ï¼Œå…ˆè·³è¿‡ã€‚

### 5.5 éƒ¨ç½²é¡¹ç›®

1. **ç¡®è®¤**ç¯å¢ƒå˜é‡å·²æ·»åŠ 
2. **ç‚¹å‡»**åº•éƒ¨çš„ "Deploy" æŒ‰é’®
3. **ç­‰å¾…**éƒ¨ç½²å®Œæˆï¼ˆ1-2åˆ†é’Ÿï¼‰

### 5.6 éƒ¨ç½²æˆåŠŸ

ä½ ä¼šçœ‹åˆ°ï¼š
- âœ… ç»¿è‰²çš„ "Deployed" æ ‡è®°
- ğŸ”— ç”Ÿäº§URLï¼š`https://tomato-ai-writer.vercel.app`

**ç‚¹å‡»URLè®¿é—®ä½ çš„ç½‘ç«™ï¼**

---

## ç¬¬å…­æ­¥ï¼šé…ç½®Supabaseæ•°æ®åº“

### 6.1 åˆ›å»ºSupabaseé¡¹ç›®

1. **è®¿é—®**ï¼šhttps://supabase.com/
2. **ç‚¹å‡»** "Start your project"
3. **ä½¿ç”¨GitHubè´¦å·ç™»å½•**
4. **ç‚¹å‡»** "New Project"
5. **å¡«å†™**ï¼š
   - **Name**: `tomato-ai`
   - **Database Password**: è®¾ç½®å¼ºå¯†ç ï¼ˆè‡³å°‘10ä½ï¼Œè®°ä½ï¼ï¼‰
   - **Region**: é€‰æ‹© `Southeast Asia (Singapore)` æˆ–ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ
6. **ç‚¹å‡»** "Create new project"
7. **ç­‰å¾…**æ•°æ®åº“åˆ›å»ºï¼ˆçº¦2åˆ†é’Ÿï¼‰

### 6.2 è·å–æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²

1. **ç™»å½•**Supabaseé¡¹ç›®
2. **ç‚¹å‡»**å·¦ä¾§ "Settings" â†’ "Database"
3. **æ‰¾åˆ°** "Connection string"
4. **é€‰æ‹©** "URI" æ ¼å¼
5. **ç‚¹å‡»** "Copy"

è¿æ¥å­—ç¬¦ä¸²ç±»ä¼¼ï¼š
```
postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-ID].supabase.co:5432/postgres
```

**æ³¨æ„**ï¼šå°† `[YOUR-PASSWORD]` æ›¿æ¢ä¸ºä½ è®¾ç½®çš„æ•°æ®åº“å¯†ç ã€‚

### 6.3 æ›´æ–°Vercelç¯å¢ƒå˜é‡

1. **è®¿é—®**Vercelé¡¹ç›®é¡µé¢
2. **ç‚¹å‡»** "Settings" â†’ "Environment Variables"
3. **æ‰¾åˆ°** `DATABASE_URL`ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼Œç‚¹å‡» "Add New"ï¼‰
4. **æ›´æ–°**ä¸ºï¼š
   ```
   postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-ID].supabase.co:5432/postgres
   ```
5. **æ›¿æ¢** `[YOUR-PASSWORD]` ä¸ºä½ çš„çœŸå®å¯†ç 
6. **ç‚¹å‡»** "Save"
7. **é‡æ–°éƒ¨ç½²**ï¼ˆç‚¹å‡»é¡¶éƒ¨çš„ "Redeploy"ï¼‰

### 6.4 è¿è¡Œæ•°æ®åº“è¿ç§»

#### æ–¹æ³•1ï¼šä½¿ç”¨Supabase SQLç¼–è¾‘å™¨ï¼ˆæ¨èï¼‰

1. **è®¿é—®**ä½ çš„Supabaseé¡¹ç›®
2. **ç‚¹å‡»**å·¦ä¾§ "SQL Editor" â†’ "New Query"
3. **å¤åˆ¶**ä»¥ä¸‹SQLå†…å®¹ï¼š

```sql
-- æ·»åŠ usersè¡¨ç¼ºå¤±çš„å­—æ®µ
ALTER TABLE users ADD COLUMN IF NOT EXISTS phone varchar(20);
ALTER TABLE users ADD COLUMN IF NOT EXISTS location varchar(100);
ALTER TABLE users ADD COLUMN IF NOT EXISTS avatar_url varchar(500);

-- æ·»åŠ novelsè¡¨
CREATE TABLE IF NOT EXISTS novels (
  id varchar(36) PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id varchar(36) NOT NULL,
  title varchar(200) NOT NULL,
  description text,
  genre varchar(50),
  status varchar(20) DEFAULT 'DRAFT',
  type varchar(20),
  cover_url varchar(500),
  tags jsonb,
  word_count integer DEFAULT 0,
  chapter_count integer DEFAULT 0,
  average_rating numeric(3, 1),
  completion_rate integer,
  is_published boolean DEFAULT false,
  created_at timestamptz DEFAULT NOW() NOT NULL,
  updated_at timestamptz DEFAULT NOW() NOT NULL,
  is_deleted boolean DEFAULT false NOT NULL
);

-- æ·»åŠ chaptersè¡¨
CREATE TABLE IF NOT EXISTS chapters (
  id varchar(36) PRIMARY KEY DEFAULT gen_random_uuid(),
  novel_id varchar(36) NOT NULL,
  user_id varchar(36) NOT NULL,
  chapter_num integer NOT NULL,
  title varchar(200) NOT NULL,
  content text,
  word_count integer DEFAULT 0,
  quality_score numeric(3, 2),
  completion_rate numeric(5, 2),
  shuangdian_count integer DEFAULT 0,
  is_published boolean DEFAULT false,
  created_at timestamptz DEFAULT NOW() NOT NULL,
  updated_at timestamptz DEFAULT NOW() NOT NULL,
  is_deleted boolean DEFAULT false NOT NULL
);

-- æ·»åŠ content_statsè¡¨
CREATE TABLE IF NOT EXISTS content_stats (
  id varchar(36) PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id varchar(36) NOT NULL,
  novel_id varchar(36),
  chapter_id varchar(36),
  word_count integer DEFAULT 0,
  quality_score numeric(3, 2),
  density_score numeric(3, 2),
  length_score numeric(3, 2),
  emotion_score numeric(3, 2),
  hook_score numeric(3, 2),
  completion_rate numeric(5, 2),
  created_at timestamptz DEFAULT NOW() NOT NULL,
  updated_at timestamptz DEFAULT NOW() NOT NULL
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX IF NOT EXISTS novels_user_id_idx ON novels(user_id);
CREATE INDEX IF NOT EXISTS novels_is_deleted_idx ON novels(is_deleted);
CREATE INDEX IF NOT EXISTS chapters_novel_id_idx ON chapters(novel_id);
CREATE INDEX IF NOT EXISTS chapters_user_id_idx ON chapters(user_id);
CREATE INDEX IF NOT EXISTS chapters_is_deleted_idx ON chapters(is_deleted);
CREATE INDEX IF NOT EXISTS content_stats_user_id_idx ON content_stats(user_id);
CREATE INDEX IF NOT EXISTS content_stats_novel_id_idx ON content_stats(novel_id);
```

4. **ç²˜è´´**åˆ°ç¼–è¾‘å™¨ä¸­
5. **ç‚¹å‡»** "Run"
6. **ç¡®è®¤**æ‰€æœ‰SQLè¯­å¥æ‰§è¡ŒæˆåŠŸï¼ˆæ˜¾ç¤ºç»¿è‰²âœ…ï¼‰

---

## ç¬¬ä¸ƒæ­¥ï¼šæ›´æ–°NEXT_PUBLIC_BASE_URL

1. **è®¿é—®**Vercelé¡¹ç›®é¡µé¢
2. **ç‚¹å‡»** "Settings" â†’ "Environment Variables"
3. **æ‰¾åˆ°** `NEXT_PUBLIC_BASE_URL`
4. **æ›´æ–°**ä¸ºä½ çš„å®é™…URLï¼š
   ```
   https://tomato-ai-writer.vercel.app
   ```
5. **ç‚¹å‡»** "Save"
6. **é‡æ–°éƒ¨ç½²**

---

## ç¬¬å…«æ­¥ï¼šæµ‹è¯•éªŒè¯

### 8.1 è®¿é—®ç½‘ç«™

è®¿é—®ï¼š`https://tomato-ai-writer.vercel.app`

### 8.2 æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½

- [ ] é¦–é¡µæ­£å¸¸æ˜¾ç¤º
- [ ] ç‚¹å‡»"æ³¨å†Œ"ï¼Œå¡«å†™ä¿¡æ¯
- [ ] æ³¨å†ŒæˆåŠŸåç™»å½•
- [ ] è®¿é—®å·¥ä½œå°
- [ ] æµ‹è¯•AIç”ŸæˆåŠŸèƒ½

---

## ç¬¬ä¹æ­¥ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆå¯é€‰ï¼‰

ä½ å¯ä»¥åœ¨ç½‘ç«™ä¸Šç›´æ¥æ³¨å†Œä¸€ä¸ªè´¦å·ä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ–è€…é€šè¿‡æ•°æ®åº“æ‰‹åŠ¨åˆ›å»ºã€‚

---

## ç¬¬åæ­¥ï¼šå•†ä¸šå˜ç°å‡†å¤‡

### é…ç½®é‚®ä»¶æœåŠ¡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å‘é€æ³¨å†ŒéªŒè¯é‚®ä»¶ï¼Œè¯·é…ç½®163/QQé‚®ç®±ã€‚

è¯¦è§ï¼š[é…ç½®æŒ‡å—.md](./é…ç½®æŒ‡å—.md) ä¸­çš„"é‚®ä»¶æœåŠ¡é…ç½®"ç« èŠ‚ã€‚

---

## âœ… å®Œæˆï¼

æ­å–œä½ ï¼ç°åœ¨ï¼š

âœ… ç½‘ç«™å·²ç»éƒ¨ç½²åˆ°å¤–ç½‘
âœ… ç”¨æˆ·å¯ä»¥è®¿é—®ï¼šhttps://tomato-ai-writer.vercel.app
âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ
âœ… å¯ä»¥å¼€å§‹å•†ä¸šå˜ç°

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœåœ¨ä»»ä½•æ­¥éª¤é‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜.md](./å¸¸è§é—®é¢˜.md)
2. æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md)
3. é‡æ–°æ£€æŸ¥æ¯ä¸€æ­¥

---

**ç¥ä½ æˆåŠŸï¼** ğŸ‰
