# ============================================================================
# 番茄小说AI写作工具 - 环境变量配置模板
# ============================================================================
# 使用说明：
# 1. 复制本文件为 .env.local
# 2. 根据您的实际情况填写配置项
# 3. 所有配置均可0成本实现
# ============================================================================

# ============================================================================
# 应用基础配置
# ============================================================================

# 应用名称
NEXT_PUBLIC_APP_NAME=番茄小说AI写作助手

# 应用域名（重要！部署到外网后必须修改为您的真实域名）
# 开发环境: http://localhost:5000
# 生产环境: https://yourdomain.com
NEXT_PUBLIC_BASE_URL=https://yourdomain.com

# 环境变量（development/production）
NODE_ENV=production

# ============================================================================
# 数据库配置
# ============================================================================
# 使用PostgreSQL集成服务，自动配置，无需修改

# PostgreSQL数据库连接字符串（自动配置，无需修改）
DATABASE_URL=postgresql://postgres:password@localhost:5432/tomato_ai

# ============================================================================
# JWT密钥配置
# ============================================================================

# JWT访问Token密钥（生产环境必须修改为强密码！建议至少32字符）
JWT_SECRET=your-super-secret-jwt-key-change-me-in-production-at-least-32-chars

# JWT刷新Token密钥（生产环境必须修改为强密码！）
JWT_REFRESH_SECRET=your-super-secret-refresh-token-key-change-me-in-production-at-least-32-chars

# ============================================================================
# 邮件服务配置
# ============================================================================
# 选择以下任意一种免费邮箱服务进行配置

# ========== 方案1：163邮箱（推荐，国内访问快） ==========
# 配置步骤：
# 1. 登录163邮箱网页版（mail.163.com）
# 2. 进入"设置" -> "POP3/SMTP/IMAP"
# 3. 开启"IMAP/SMTP服务"
# 4. 点击"获取授权码"（使用手机验证）
# 5. 复制授权码填入下方的 EMAIL_PASS

EMAIL_HOST=smtp.163.com
EMAIL_PORT=465
EMAIL_SECURE=true
EMAIL_USER=your_email@163.com
EMAIL_PASS=your_163_authorization_code_here
EMAIL_FROM=番茄小说AI <your_email@163.com>

# ========== 方案2：QQ邮箱 ==========
# 配置步骤：
# 1. 登录QQ邮箱网页版（mail.qq.com）
# 2. 进入"设置" -> "账户"
# 3. 找到"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
# 4. 开启"IMAP/SMTP服务"
# 5. 点击"生成授权码"（使用手机验证）
# 6. 复制授权码填入下方的 EMAIL_PASS

# EMAIL_HOST=smtp.qq.com
# EMAIL_PORT=465
# EMAIL_SECURE=true
# EMAIL_USER=your_email@qq.com
# EMAIL_PASS=your_qq_authorization_code_here
# EMAIL_FROM=番茄小说AI <your_email@qq.com>

# ========== 方案3：Gmail（海外访问友好） ==========
# 配置步骤：
# 1. 登录Google账户
# 2. 进入"安全性"设置
# 3. 开启"两步验证"
# 4. 在"两步验证"页面找到"应用专用密码"
# 5. 选择"邮件"和"其他（自定义名称）"
# 6. 生成应用专用密码并复制填入下方的 EMAIL_PASS

# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=your_email@gmail.com
# EMAIL_PASS=your_app_specific_password_here
# EMAIL_FROM=番茄小说AI <your_email@gmail.com>

# Mock模式开关
# true=模拟发送（仅记录日志，不实际发送邮件），适合开发测试
# false=真实发送（通过SMTP发送邮件），生产环境必须设为false
EMAIL_MOCK_MODE=false

# ============================================================================
# 微信登录配置
# ============================================================================
# 微信开放平台OAuth2.0登录配置

# 微信开放平台AppID（必填）
# 获取步骤：
# 1. 访问 https://open.weixin.qq.com
# 2. 注册账号（个人开发者免费）
# 3. 创建网站应用
# 4. 审核通过后获取AppID和AppSecret

WECHAT_APPID=wx1234567890abcdef

# 微信开放平台AppSecret（必填，生产环境不能泄露）
WECHAT_SECRET=your-wechat-app-secret-here

# 是否使用Mock模式
# true=模拟登录（不需要微信授权，用于测试）
# false=真实登录（需要用户微信授权，生产环境必须设为false）
WECHAT_MOCK_MODE=false

# 微信授权回调地址（重要！必须与微信开放平台配置的回调域名一致）
# 格式: https://yourdomain.com/api/auth/wechat/callback
WECHAT_REDIRECT_URI=https://yourdomain.com/api/auth/wechat/callback

# ============================================================================
# 豆包大模型配置
# ============================================================================
# 使用集成服务调用豆包大模型，无需API Key

# 豆包大模型API Key（可选，集成服务会自动配置）
DOUBAO_API_KEY=

# 豆包模型选择
DOUBAO_MODEL=doubao-seed-1-6-251015

# ============================================================================
# 对象存储配置
# ============================================================================
# 使用S3集成服务，自动配置，无需修改

# S3兼容存储端点
S3_ENDPOINT=https://s3.amazonaws.com

# S3访问密钥ID
S3_ACCESS_KEY=your-s3-access-key-id

# S3访问密钥密码
S3_SECRET_KEY=your-s3-secret-key

# S3存储桶名称
S3_BUCKET=your-bucket-name

# S3存储区域
S3_REGION=us-east-1

# ============================================================================
# 文件上传配置
# ============================================================================

# 最大文件上传大小（10MB）
MAX_FILE_SIZE=10485760

# 允许的文件类型
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ============================================================================
# 安全配置
# ============================================================================

# 密码重置Token有效期（分钟）
RESET_TOKEN_EXPIRES_IN=30

# 访问Token有效期（小时）
ACCESS_TOKEN_EXPIRES_IN=24

# 刷新Token有效期（天）
REFRESH_TOKEN_EXPIRES_IN=7

# 密码最小长度
PASSWORD_MIN_LENGTH=8

# ============================================================================
# 限流配置
# ============================================================================

# 每小时最大请求次数
RATE_LIMIT_MAX_REQUESTS_PER_HOUR=100

# API请求限流窗口（秒）
RATE_LIMIT_WINDOW_SECONDS=3600

# ============================================================================
# 支付配置
# ============================================================================

# 支付成功后的跳转地址
PAYMENT_SUCCESS_REDIRECT=/workspace

# 支付失败后的跳转地址
PAYMENT_FAILED_REDIRECT=/payment?failed=true

# ============================================================================
# 日志配置
# ============================================================================

# 日志级别（error/warn/info/debug）
LOG_LEVEL=info

# 是否启用详细日志
ENABLE_VERBOSE_LOGGING=false

# ============================================================================
# 第三方服务配置（可选）
# ============================================================================

# Google Analytics ID（可选）
NEXT_PUBLIC_GA_ID=

# 百度统计ID（可选）
NEXT_PUBLIC_BAIDU_ANALYTICS_ID=

# 客服邮箱（可选）
CUSTOMER_SERVICE_EMAIL=support@example.com

# ============================================================================
# 配置检查清单（生产环境部署前必读）
# ============================================================================
#
# ✅ 1. 修改 NEXT_PUBLIC_BASE_URL 为您的真实域名
# ✅ 2. 修改 JWT_SECRET 和 JWT_REFRESH_SECRET 为强密码
# ✅ 3. 配置邮件服务（三选一：163/QQ/Gmail）
# ✅ 4. 获取微信开放平台 AppID 和 AppSecret
# ✅ 5. 设置 WECHAT_MOCK_MODE=false 启用真实微信登录
# ✅ 6. 设置 EMAIL_MOCK_MODE=false 启用真实邮件发送
# ✅ 7. 设置 NODE_ENV=production
# ✅ 8. 确认 WECHAT_REDIRECT_URI 与微信开放平台配置一致
#
# ============================================================================
