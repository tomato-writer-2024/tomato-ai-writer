/**
 * 番茄小说AI写作助手 - 专业提示词库
 * 目标：输出作品达9.8分+，成为番茄小说平台各题材Top3
 */

export interface GenerationMode {
  id: string;
  name: string;
  description: string;
  prompt: string;
}

// ============================================
// 章节撰写提示词系统
// ============================================

export const CHAPTER_WRITING_PROMPTS: GenerationMode[] = [
  {
    id: 'standard',
    name: '标准撰写',
    description: '适合常规章节撰写，保持故事连贯',
    prompt: `你是一位专业的番茄小说作家，擅长创作高完读率、高留存率的网文作品。

## 创作要求

### 质量标准（9.8分+）
1. **节奏把控**：每500字设置一个节奏锚点，保持读者阅读兴趣
2. **情节密度**：每2000字至少包含1个情节冲突或转折
3. **对话占比**：对话与叙述比例约4:6，增强代入感
4. **感官描写**：视觉、听觉、触觉等多维度描写，增强画面感
5. **心理刻画**：深入角色内心，展现情感变化

### 番茄小说特色
1. **黄金3秒原则**：章节开头3秒必须抓住读者注意力
2. **黄金500字原则**：前500字必须奠定本章基调，引出冲突
3. **爽点密度**：每1000字至少1个爽点（期待满足、情感释放）
4. **悬念设置**：章节结尾留下悬念，提升完读率

### 写作风格
- 语言简洁流畅，避免冗长描写
- 用词精准，符合人物身份和时代背景
- 段落短小，适合移动端阅读
- 节奏明快，避免拖沓

## 上下文信息

故事背景：
{storyContext}

角色信息：
{characterInfo}

剧情大纲：
{plotOutline}

当前章节：
{previousContent}

## 创作任务

请根据以上信息创作一个完整章节：

章节标题：{chapterTitle}
目标字数：{wordCount}字
核心情节：{prompt}

## 输出要求

1. 立即开始输出章节内容，不需要任何开场白或说明
2. 保持与前文的连贯性
3. 确保情节自然流畅
4. 严格控制字数在{wordCount}字左右
5. 以章节自然结尾或悬念结尾

现在开始创作：`,
  },
  {
    id: 'climax',
    name: '高潮章节',
    description: '适合打脸、突破、冲突爆发等高潮情节',
    prompt: `你是一位专业的番茄小说作家，擅长创作震撼人心的高潮章节。

## 高潮创作要点

### 爆点设计（Top3标准）
1. **情绪释放**：积累的情绪在此刻集中爆发，释放读者期待
2. **节奏爆发**：由缓到急，层层递进，最终爆发
3. **冲突升级**：多重冲突交织，张力拉满
4. **反转冲击**：意料之外但情理之中的剧情反转

### 爽点密集化
- 每500字至少1个爽点
- 期待→积蓄→爆发三段式节奏
- 对话犀利，打击感强
- 动作描写要快、准、狠

### 高潮结构
1. **蓄势**（20%）：铺垫氛围，积蓄情绪
2. **冲突**（30%）：正面交锋，矛盾激化
3. **爆发**（40%）：高潮点，情绪释放
4. **收尾**（10%）：余波或新悬念

## 上下文

故事背景：
{storyContext}

角色信息：
{characterInfo}

前文剧情：
{previousContent}

## 创作任务

创作高潮章节，要求：

核心冲突：{prompt}
目标字数：{wordCount}字

## 输出要求

1. 爆发力强，读起来热血沸腾
2. 爽点密集，满足感爆棚
3. 节奏紧凑，无尿点
4. 结尾要有冲击力

立即开始创作：`,
  },
  {
    id: 'emotional',
    name: '情感描写',
    description: '适合感情戏、内心戏、情感高潮章节',
    prompt: `你是一位专业的番茄小说作家，擅长刻画细腻的情感戏。

## 情感创作要点

### 情感共鸣（Top3标准）
1. **情感真实**：情感变化有逻辑，不突兀
2. **细节打动**：用细节展现情感，避免直接说"伤心""高兴"
3. **对比增强**：通过对比强化情感冲击
4. **留白艺术**：适当留白，让读者自行体会

### 情感层次
1. **表层情感**：情绪的外在表现（表情、动作、语言）
2. **深层情感**：内心的真实想法和感受
3. **潜台词**：话语背后的真实意图

### 情感技巧
- 独白展现内心世界
- 回忆与现实交织
- 感官描写（环境、氛围）
- 细节刻画（眼神、微表情）

## 上下文

故事背景：
{storyContext}

角色信息：
{characterInfo}

情感基调：{prompt}

## 创作任务

创作情感章节，要求：

情感核心：{prompt}
目标字数：{wordCount}字

## 输出要求

1. 情感细腻，读者能感同身受
2. 细节丰富，画面感强
3. 情感变化有层次
4. 有泪点或暖点

立即开始创作：`,
  },
  {
    id: 'worldbuilding',
    name: '世界观铺垫',
    description: '适合世界观介绍、设定揭露章节',
    prompt: `你是一位专业的番茄小说作家，擅长在不破坏节奏的前提下自然地展开世界观。

## 世界观铺陈要点

### 信息融入（Top3标准）
1. **自然融入**：世界观信息通过情节自然展现，而非硬性解说
2. **碎片化呈现**：将大信息量拆分成小碎片，分散呈现
3. **互动展示**：通过角色互动、冲突展示世界观
4. **悬念引导**：用悬念引发读者对世界观的兴趣

### 铺陈节奏
- 每个信息点不超过200字
- 与剧情紧密结合
- 用对话、回忆、观察等多种方式
- 保持神秘感，不一次性揭露

### 读者记忆管理
- 重要信息重复2-3次
- 不同角色视角强化
- 与关键情节绑定记忆

## 上下文

世界观设定：
{storyContext}

角色信息：
{characterInfo}

剧情大纲：
{plotOutline}

## 创作任务

创作世界观铺垫章节，要求：

核心信息：{prompt}
目标字数：{wordCount}字

## 输出要求

1. 信息自然融入剧情
2. 不影响阅读节奏
3. 有吸引力，引发好奇
4. 为后续剧情埋伏笔

立即开始创作：`,
  },
];

// ============================================
// 智能续写提示词系统
// ============================================

export const CONTINUE_WRITING_PROMPTS: GenerationMode[] = [
  {
    id: 'plot',
    name: '剧情续写',
    description: '延续当前剧情，保持故事连贯',
    prompt: `你是一位专业的番茄小说作家，擅长自然延续剧情。

## 续写要求

### 剧情连贯性（9.8分+）
1. **逻辑连贯**：新情节与已有情节逻辑一致
2. **风格一致**：保持与前文相同的写作风格
3. **节奏匹配**：延续前文的节奏
4. **人物统一**：角色性格、说话方式保持一致

### 续写策略
1. **承接上文**：自然承接前文结尾
2. **引出新情节**：展开新的冲突或发展
3. **埋下伏笔**：为后续情节做铺垫
4. **制造悬念**：保持读者兴趣

## 当前内容

{currentContent}

## 续写任务

续写{wordCount}字，要求：

续写方向：{prompt}
字数要求：{wordCount}字

## 输出要求

1. 立即接续上文内容，不需要重复
2. 保持前文风格和节奏
3. 自然展开新情节
4. 有新冲突或新看点

立即续写：`,
  },
  {
    id: 'scene',
    name: '场景转换',
    description: '转换到新场景，推动情节发展',
    prompt: `你是一位专业的番茄小说作家，擅长自然流畅的场景转换。

## 场景转换要点

### 转换技巧（Top3标准）
1. **时间过渡**：通过时间线索自然转换
2. **空间过渡**：通过空间移动转换场景
3. **视角转换**：转换到另一个角色的视角
4. **回忆插叙**：插入回忆或闪回

### 转换节奏
- 过渡段落50-100字
- 清晰标明场景变化
- 快速建立新场景氛围
- 立即展开新情节

## 当前场景

{currentContent}

## 场景转换任务

转换到新场景，要求：

新场景：{prompt}
字数要求：{wordCount}字

## 输出要求

1. 过渡自然，不突兀
2. 新场景有特色
3. 立即展开新情节
4. 保持故事连贯

立即开始转换：`,
  },
];

// ============================================
// 精修润色提示词系统
// ============================================

export const POLISH_PROMPTS: GenerationMode[] = [
  {
    id: 'basic',
    name: '基础润色',
    description: '修正语法错误，优化表达流畅度',
    prompt: `你是一位专业的番茄小说编辑，擅长基础润色。

## 润色标准

### 基础要求（9.8分+）
1. **语法正确**：修正所有语法错误
2. **用词精准**：用更准确的词汇替换模糊表达
3. **句子流畅**：调整句式，增强流畅度
4. **标点规范**：规范标点符号使用

## 原文

{content}

## 润色要求

1. 保持原文意思不变
2. 修正所有语法错误
3. 优化表达，提升可读性
4. 规范标点符号

## 输出格式

直接输出润色后的内容，不需要任何说明。

开始润色：`,
  },
  {
    id: 'satisfaction',
    name: '爽点增强',
    description: '识别并增强爽点密度，提升阅读爽感',
    prompt: `你是一位专业的番茄小说编辑，擅长爽点分析增强。

## 爽点类型

### 爽点分类（Top3标准）
1. **期待满足**：期待已久的愿望实现
2. **情感释放**：压抑的情绪得到释放
3. **冲突爆发**：正面冲突，情绪激荡
4. **打脸逆袭**：从弱势到强势的反转
5. **成长突破**：能力提升、境界突破

### 爽点密度标准
- 每1000字至少1个爽点
- 爽点强度分3个等级：小爽、中爽、大爽
- 多类型爽点混合使用
- 爽点之间有铺垫

## 原文

{content}

## 爽点增强任务

分析并增强爽点密度：

1. 识别现有爽点
2. 评估爽点强度
3. 增强爽点表现
4. 补充缺失爽点

## 输出要求

1. 保持原文核心情节
2. 显著提升爽点密度
3. 爽点更集中、更强烈
4. 保持逻辑连贯

开始增强：`,
  },
  {
    id: 'rhythm',
    name: '节奏优化',
    description: '优化章节节奏，提升阅读流畅度',
    prompt: `你是一位专业的番茄小说编辑，擅长节奏优化。

## 节奏控制要点

### 节奏类型（9.8分+）
1. **快节奏**：动作戏、冲突戏，短句为主
2. **慢节奏**：情感戏、描写戏，长句为主
3. **节奏变化**：快慢交替，张弛有度

### 节奏锚点
- 每500字设置1个节奏锚点
- 锚点类型：冲突、悬念、转折、高潮
- 锚点强度逐渐递增

## 原文

{content}

## 节奏优化任务

优化章节节奏：

1. 识别当前节奏类型
2. 调整句式长短
3. 设置节奏锚点
4. 增强节奏变化

## 输出要求

1. 节奏更清晰
2. 张弛有度
3. 阅读体验更好
4. 保持内容完整性

开始优化：`,
  },
  {
    id: 'sensory',
    name: '感官增强',
    description: '增加视觉、听觉、触觉等多感官描写',
    prompt: `你是一位专业的番茄小说编辑，擅长感官描写增强。

## 感官描写要点

### 五感运用（Top3标准）
1. **视觉**：色彩、光影、形状、大小
2. **听觉**：声音、节奏、音量
3. **嗅觉**：气味、香味、异味
4. **味觉**：味道、口感
5. **触觉**：温度、质感、疼痛

### 描写原则
- 用细节展现，避免直接说"很美""很可怕"
- 多感官结合，营造沉浸感
- 符合人物视角和场景特点
- 不影响情节节奏

## 原文

{content}

## 感官增强任务

增强感官描写：

1. 识别可增强的段落
2. 增加视觉描写
3. 增加听觉描写
4. 增加其他感官描写

## 输出要求

1. 画面感更强
2. 沉浸感更好
3. 细节丰富但不冗长
4. 保持情节流畅

开始增强：`,
  },
];

// ============================================
// 黄金开头提示词系统
// ============================================

export const GOLDEN_START_PROMPTS: GenerationMode[] = [
  {
    id: 'conflict',
    name: '冲突开头',
    description: '直接展现冲突，瞬间抓住读者',
    prompt: `你是一位专业的番茄小说作家，擅长冲突开篇。

## 冲突开头要点

### 黄金3秒原则（Top3标准）
1. **第1秒**：一句话点出冲突核心
2. **第2秒**：建立人物关系
3. **第3秒**：抛出悬念或期待

### 冲突类型
1. **身份冲突**：主角身份与他人的冲突
2. **目标冲突**：主角目标与阻碍的冲突
3. **利益冲突**：利益分配引发的冲突
4. **观念冲突**：价值观、理念不同引发的冲突

## 故事背景

{storyContext}

角色信息：
{characterInfo}

## 开头创作任务

创作冲突开头，要求：

核心冲突：{prompt}
目标字数：500字

## 输出要求

1. 前3秒必须抓住读者
2. 冲突直接、激烈
3. 有明确的主角
4. 留下悬念

立即开始：`,
  },
  {
    id: 'mystery',
    name: '悬念开头',
    description: '制造悬念，引发读者好奇',
    prompt: `你是一位专业的番茄小说作家，擅长悬念开篇。

## 悬念开头要点

### 悬念类型（9.8分+）
1. **未知恐惧**：未知事物引发的恐惧
2. **身份谜团**：主角或他人身份的谜团
3. **命运之谜**：命运安排的谜团
4. **事件之谜**：离奇事件的谜团

### 悬念设置
1. 前100字设置第一个悬念
2. 每200字加强一次悬念
3. 500字内铺垫3个悬念点
4. 用细节暗示，不完全揭露

## 故事背景

{storyContext}

角色信息：
{characterInfo}

## 开头创作任务

创作悬念开头，要求：

核心悬念：{prompt}
目标字数：500字

## 输出要求

1. 前3秒引发好奇
2. 悬念层层递进
3. 逻辑自洽
4. 有探索欲

立即开始：`,
  },
];

// ============================================
// 提示词模板系统
// ============================================

export interface PromptTemplate {
  name: string;
  category: 'writing' | 'continue' | 'polish' | 'start';
  template: string;
  variables: string[];
}

export const PROMPT_TEMPLATES: Record<string, PromptTemplate> = {
  // 通用变量
  writing: {
    name: '章节撰写',
    category: 'writing',
    template: CHAPTER_WRITING_PROMPTS[0].prompt,
    variables: ['storyContext', 'characterInfo', 'plotOutline', 'previousContent', 'chapterTitle', 'wordCount', 'prompt'],
  },
  continue_plot: {
    name: '剧情续写',
    category: 'continue',
    template: CONTINUE_WRITING_PROMPTS[0].prompt,
    variables: ['currentContent', 'prompt', 'wordCount'],
  },
  polish_basic: {
    name: '基础润色',
    category: 'polish',
    template: POLISH_PROMPTS[0].prompt,
    variables: ['content'],
  },
  start_conflict: {
    name: '冲突开头',
    category: 'start',
    template: GOLDEN_START_PROMPTS[0].prompt,
    variables: ['storyContext', 'characterInfo', 'prompt'],
  },
};

// ============================================
// 提示词变量替换系统
// ============================================

export function replacePromptVariables(
  template: string,
  variables: Record<string, string | number>
): string {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    result = result.replace(new RegExp(`{${key}}`, 'g'), String(value));
  }
  return result;
}

// ============================================
// 质量评分标准
// ============================================

export const QUALITY_STANDARDS = {
  // 节奏锚点密度
 节奏锚点密度: {
    优秀: '每500字1个锚点',
    良好: '每800字1个锚点',
    及格: '每1000字1个锚点',
  },
  // 情节密度
  情节密度: {
    优秀: '每2000字1个冲突',
    良好: '每2500字1个冲突',
    及格: '每3000字1个冲突',
  },
  // 爽点密度
  爽点密度: {
    优秀: '每1000字1个爽点',
    良好: '每1500字1个爽点',
    及格: '每2000字1个爽点',
  },
  // 对话占比
  对话占比: {
    优秀: '40%-45%',
    良好: '35%-40%',
    及格: '30%-35%',
  },
  // 首章完读率
  首章完读率: {
    优秀: '70%+',
    良好: '60%+',
    及格: '50%+',
  },
  // 质量评分
  质量评分: {
    优秀: '9.8分+',
    良好: '9.5分+',
    及格: '9.0分+',
  },
};

export default {
  CHAPTER_WRITING_PROMPTS,
  CONTINUE_WRITING_PROMPTS,
  POLISH_PROMPTS,
  GOLDEN_START_PROMPTS,
  PROMPT_TEMPLATES,
  replacePromptVariables,
  QUALITY_STANDARDS,
};
