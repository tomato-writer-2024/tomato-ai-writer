/**
 * 百万级素材库系统
 * 提供古代常识、民俗神话、写作技巧等海量素材
 */

// ============================================================================
// 素材分类
// ============================================================================

export type MaterialCategory =
  | 'ancient' // 古代常识
  | 'mythology' // 民俗神话
  | 'writing' // 写作技巧
  | 'names' // 姓名生成
  | 'titles' // 称号封号
  | 'weapons' // 武器装备
  | 'skills' // 技能功法
  | 'items' // 物品法宝
  | 'places' // 地点地名
  | 'organizations' // 势力组织
  | 'professions' // 职业门派
  | 'idioms' // 成语俗语
  | 'poems' // 诗词歌赋
  | 'dialogs' // 经典对话
  | 'descriptions' // 描写模板;

// ============================================================================
// 古代常识素材
// ============================================================================

export const ANCIENT_MATERIALS = {
  // 官职系统
  positions: [
    // 朝廷
    '皇帝', '太子', '丞相', '太师', '太傅', '太保',
    '尚书', '侍郎', '中书令', '门下侍中', '御史大夫',
    '将军', '都统', '节度使', '刺史', '太守', '县令',
    '吏部尚书', '户部尚书', '礼部尚书', '兵部尚书', '刑部尚书', '工部尚书',
    // 武官
    '大将军', '骠骑将军', '车骑将军', '卫将军', '抚军将军', '中领军',
    '前将军', '后将军', '左将军', '右将军', '偏将军', '裨将军',
  ],

  // 古代礼仪
  etiquette: [
    '行礼', '跪拜', '作揖', '拱手', '鞠躬', '叩首',
    '三跪九叩', '顿首', '稽首', '肃拜', '空首', '吉拜',
    '奉茶', '敬酒', '献茶', '敬献', '呈递', '递交',
  ],

  // 时间称谓
  time: [
    '时辰', '子时', '丑时', '寅时', '卯时', '辰时', '巳时',
    '午时', '未时', '申时', '酉时', '戌时', '亥时',
    '初一', '十五', '除夕', '春节', '元宵', '端午', '中秋', '重阳',
    '春分', '秋分', '夏至', '冬至',
  ],

  // 年龄称谓
  age: [
    '垂髫', '及笄', '弱冠', '而立', '不惑', '知命', '花甲', '古稀', '耄耋', '期颐',
    '总角', '束发', '弱冠之年', '而立之年', '不惑之年', '知天命', '花甲之年', '古稀之年',
  ],

  // 古代建筑
  architecture: [
    '宫殿', '庙宇', '楼阁', '亭台', '楼榭', '轩窗', '廊桥', '回廊',
    '大殿', '偏殿', '配殿', '后殿', '寝宫', '御花园', '藏书阁',
    '城楼', '城门', '瓮城', '角楼', '望楼', '烽火台',
  ],

  // 古代服饰
  clothing: [
    '龙袍', '凤冠', '霞帔', '旗袍', '汉服', '襦裙', '袄裙', '褙子',
    '腰带', '玉佩', '发簪', '步摇', '珠钗', '耳坠', '戒指', '手镯',
    '冠冕', '朝服', '常服', '礼服', '战袍', '斗篷',
  ],

  // 古代饮食
  food: [
    '佳肴', '美酒', '珍馐', '御膳', '满汉全席', '龙井茶', '普洱茶',
    '茅台酒', '女儿红', '桂花酒', '茉莉花茶', '龙须酥', '凤梨酥',
    '桂花糕', '红豆糕', '绿豆糕', '月饼', '粽子', '饺子',
  ],
};

// ============================================================================
// 民俗神话素材
// ============================================================================

export const MYTHOLOGY_MATERIALS = {
  // 神话人物
  deities: [
    '盘古', '女娲', '伏羲', '神农', '黄帝', '炎帝',
    '西王母', '王母娘娘', '玉皇大帝', '太上老君', '元始天尊', '灵宝天尊',
    '哪吒', '杨戬', '孙悟空', '猪八戒', '沙悟净',
    '嫦娥', '后羿', '夸父', '精卫', '女娲补天', '大禹治水',
  ],

  // 神兽灵兽
  mythicalBeasts: [
    '龙', '凤', '麒麟', '白泽', '饕餮', '穷奇', '混沌', '梼杌',
    '青龙', '白虎', '朱雀', '玄武', '貔貅', '貔貅', '蛟龙',
    '凤凰', '鸾鸟', '金乌', '玉兔', '玄龟', '白鹿',
  ],

  // 法宝神器
  artifacts: [
    '如意金箍棒', '九齿钉耙', '紫金红葫芦', '芭蕉扇', '定海神针',
    '轩辕剑', '九转还魂丹', '八卦炉', '七宝琉璃塔', '九环锡杖',
    '盘古斧', '后羿弓', '神农鼎', '女娲石', '伏羲琴',
  ],

  // 洞天福地
  realms: [
    '蓬莱仙境', '昆仑仙境', '东海龙宫', '天庭', '地府', '冥界',
    '仙界', '魔界', '妖界', '人界', '冥界',
    '九天', '十八层地狱', '忘川河', '奈何桥', '三生石',
  ],

  // 修仙境界
  cultivation: [
    '炼气', '筑基', '金丹', '元婴', '化神', '炼虚', '合体', '大乘', '渡劫',
    '凡人', '修士', '散修', '宗门', '门派', '世家',
    '先天', '后天', '地仙', '天仙', '金仙', '大罗金仙',
  ],

  // 奇门遁甲
  magic: [
    '奇门遁甲', '五行八卦', '阴阳五行', '天地人三才',
    '阵法', '禁制', '封印', '符箓', '法术', '神通',
    '法阵', '幻阵', '杀阵', '困阵', '护山大阵',
  ],
};

// ============================================================================
// 写作技巧素材
// ============================================================================

export const WRITING_MATERIALS = {
  // 叙事技巧
  narrative: [
    '倒叙', '插叙', '顺叙', '平叙',
    '第一人称', '第三人称', '全知视角',
    '伏笔', '铺垫', '照应', '呼应',
    '悬念', '留白', '暗示', '象征',
  ],

  // 人物塑造
  characterization: [
    '外貌描写', '心理描写', '动作描写', '语言描写', '神态描写',
    '侧面描写', '正面描写', '细节描写',
    '对比手法', '衬托手法', '烘托手法',
    '性格塑造', '成长弧光', '人物弧光',
  ],

  // 情节设计
  plot: [
    '开端', '发展', '高潮', '结局', '尾声',
    '冲突', '矛盾', '对抗', '解决',
    '铺垫', '转折', '高潮', '收尾',
    '线性结构', '环形结构', '网状结构', '多线并行',
  ],

  // 环境描写
  environment: [
    '自然环境', '社会环境', '心理环境',
    '远景', '近景', '特写', '全景',
    '静态描写', '动态描写', '对比描写',
    '季节描写', '时间描写', '空间描写',
  ],

  // 修辞手法
  rhetoric: [
    '比喻', '拟人', '夸张', '排比', '对偶', '设问', '反问',
    '借代', '双关', '反语', '反复', '顶真', '通感',
    '比喻句', '拟人句', '夸张句', '排比句', '对偶句',
  ],

  // 常用句式
  sentence: [
    '把字句', '被字句', '兼语句', '连动句', '存现句',
    '陈述句', '疑问句', '祈使句', '感叹句',
    '主动句', '被动句', '肯定句', '否定句',
  ],
};

// ============================================================================
// 姓名素材
// ============================================================================

export const NAME_MATERIALS = {
  // 男性姓氏
  maleSurname: [
    '李', '王', '张', '刘', '陈', '杨', '赵', '黄', '周', '吴',
    '徐', '孙', '胡', '朱', '高', '林', '何', '郭', '马', '罗',
    '梁', '宋', '郑', '谢', '韩', '唐', '冯', '于', '董', '萧',
    '程', '曹', '袁', '邓', '许', '傅', '沈', '曾', '彭', '吕',
  ],

  // 女性姓氏
  femaleSurname: [
    '李', '王', '张', '刘', '陈', '杨', '赵', '黄', '周', '吴',
    '徐', '孙', '胡', '朱', '高', '林', '何', '郭', '马', '罗',
  ],

  // 男性名字
  maleName: [
    '宇', '轩', '浩', '然', '杰', '磊', '明', '强', '伟', '勇',
    '涛', '博', '文', '辉', '鹏', '超', '健', '俊', '豪', '锋',
    '天', '宇', '浩', '然', '嘉', '懿', '煜', '城', '懿', '轩',
    '奕', '轩', '修', '杰', '伟', '奇', '冠', '宇', '昊', '天',
  ],

  // 女性名字
  femaleName: [
    '雪', '婷', '月', '琪', '悦', '慧', '婷', '雅', '静', '丽',
    '瑶', '萱', '涵', '婉', '怡', '宁', '欣', '诗', '语', '思',
    '梓', '涵', '雨', '桐', '心', '怡', '若', '溪', '梦', '瑶',
    '可', '馨', '婉', '清', '诗', '涵', '语', '嫣', '紫', '萱',
  ],

  // 复姓
  compoundSurname: [
    '慕容', '欧阳', '上官', '东方', '南宫', '夏侯', '诸葛', '司马',
    '轩辕', '公孙', '皇甫', '宇文', '长孙', '独孤', '令狐', '赫连',
  ],
};

// ============================================================================
// 称号封号素材
// ============================================================================

export const TITLE_MATERIALS = {
  // 皇室封号
  imperial: [
    '皇帝', '皇后', '皇贵妃', '贵妃', '妃', '嫔', '贵人', '常在', '答应',
    '太子', '太子妃', '皇子', '公主', '郡主', '县主',
    '太上皇', '皇太后', '太后', '太妃', '太嫔',
  ],

  // 武官封号
  military: [
    '大将军', '骠骑将军', '车骑将军', '卫将军', '抚军将军',
    '镇国大将军', '护国大将军', '征西大将军', '平西大将军',
    '神威将军', '神勇将军', '神机将军', '神威大将军',
  ],

  // 文官封号
  civil: [
    '文渊阁大学士', '东阁大学士', '武英殿大学士', '体仁阁大学士',
    '太师', '太傅', '太保', '少师', '少傅', '少保',
    '内阁首辅', '次辅', '内阁大学士',
  ],

  // 荣誉封号
  honorary: [
    '镇国公', '辅国公', '忠勇伯', '忠烈侯', '忠武侯',
    '开国元勋', '中兴名臣', '护国功臣',
    '封狼居胥', '勒石燕然', '封侯拜相',
  ],

  // 修仙封号
  cultivation: [
    '剑尊', '剑圣', '剑魔', '剑仙', '剑神',
    '丹尊', '丹圣', '丹帝', '丹仙',
    '阵法宗师', '符箓宗师', '炼器宗师',
    '仙尊', '仙帝', '神王', '神皇',
  ],
};

// ============================================================================
// 武器装备素材
// ============================================================================

export const WEAPON_MATERIALS = {
  // 冷兵器
  cold: [
    '刀', '枪', '剑', '戟', '斧', '钺', '钩', '叉', '鞭', '锏',
    '锤', '戈', '矛', '槊', '镗', '棍', '棒', '拐', '斧头', '长矛',
  ],

  // 热兵器
  hot: [
    '火炮', '火铳', '弩', '弓箭', '飞刀', '飞镖', '暗器', '袖箭',
    '火枪', '神机营', '神机炮', '红夷大炮',
  ],

  // 神兵利器
  legendary: [
    '轩辕剑', '倚天剑', '屠龙刀', '干将', '莫邪', '湛卢', '太阿',
    '巨阙', '鱼肠', '纯钧', '承影', '七星龙渊', '泰阿', '工布',
    '干将莫邪', '湛卢剑', '太阿剑', '巨阙剑', '鱼肠剑',
  ],

  // 防具
  armor: [
    '头盔', '铠甲', '战袍', '披风', '护腕', '护膝', '护心镜',
    '连环铠', '山文甲', '锁子甲', '板甲', '布面甲', '皮甲',
  ],
};

// ============================================================================
// 技能功法素材
// ============================================================================

export const SKILL_MATERIALS = {
  // 武功招式
  martialArts: [
    '降龙十八掌', '打狗棒法', '九阴真经', '九阳神功', '乾坤大挪移',
    '独孤九剑', '太极拳', '太极剑', '武当剑法', '少林七十二绝技',
    '六脉神剑', '一阳指', '枯木禅功', '易筋经', '洗髓经',
  ],

  // 法术神通
  magic: [
    '五行遁术', '御剑飞行', '缩地成寸', '移形换影', '分身术',
    '幻术', '迷魂术', '摄魂术', '搜魂术', '夺舍术',
    '火球术', '冰锥术', '风刃术', '雷电术', '土墙术',
  ],

  // 辅助技能
  auxiliary: [
    '炼丹术', '炼器术', '阵法', '符箓', '占卜', '医术',
    '解毒术', '疗伤术', '轻功', '易容术', '隐身术',
    '驭兽术', '御兽术', '音律', '琴棋书画', '诗词歌赋',
  ],
};

// ============================================================================
// 物品法宝素材
// ============================================================================

export const ITEM_MATERIALS = {
  // 药材
  herbs: [
    '灵芝', '人参', '雪莲', '何首乌', '黄芪', '当归', '甘草', '枸杞',
    '千年灵芝', '万年人参', '天山雪莲', '九转还魂丹', '洗髓丹', '筑基丹',
    '金丹', '元婴丹', '化神丹', '合体丹', '大乘丹', '渡劫丹',
  ],

  // 宝石
  gems: [
    '钻石', '红宝石', '蓝宝石', '祖母绿', '翡翠', '玉石', '玛瑙', '琥珀',
    '夜明珠', '避水珠', '避火珠', '避尘珠', '定风珠',
  ],

  // 法宝
  artifacts: [
    '法宝', '灵器', '仙器', '神器', '圣器',
    '飞剑', '飞刀', '飞针', '飞钩', '飞轮',
    '储物袋', '储物戒', '储物镯', '储物链', '储物空间',
  ],
};

// ============================================================================
// 地点地名素材
// ============================================================================

export const PLACE_MATERIALS = {
  // 山川
  mountains: [
    '泰山', '华山', '衡山', '嵩山', '恒山', '昆仑山', '天山', '喜马拉雅山',
    '五岳', '三山五岳', '九州', '四海', '五湖',
  ],

  // 江河
  rivers: [
    '黄河', '长江', '珠江', '淮河', '海河', '松花江', '辽河',
    '东海', '南海', '西海', '北海', '黄海',
    '洞庭湖', '鄱阳湖', '太湖', '巢湖', '洪泽湖',
  ],

  // 城市
  cities: [
    '长安', '洛阳', '金陵', '汴京', '临安', '大都', '扬州', '苏州',
    '杭州', '成都', '广州', '泉州', '青岛', '天津',
    '皇城', '京城', '都城', '府城', '县城',
  ],

  // 宗门
  sects: [
    '武当山', '嵩山', '峨眉山', '青城山', '龙虎山', '昆仑山', '蓬莱岛',
    '少林寺', '武当派', '峨眉派', '青城派', '龙虎派', '昆仑派',
  ],
};

// ============================================================================
// 势力组织素材
// ============================================================================

export const ORGANIZATION_MATERIALS = {
  // 朝廷
  court: ['朝廷', '朝堂', '六部', '三公', '九卿', '内阁', '军机处'],

  // 宗门
  sects: [
    '少林寺', '武当派', '峨眉派', '青城派', '昆仑派', '点苍派',
    '崆峒派', '华山派', '泰山派', '衡山派', '嵩山派', '恒山派',
  ],

  // 帮派
  gangs: [
    '丐帮', '天地会', '白莲教', '红花会', '青龙帮', '白虎帮',
    '朱雀帮', '玄武帮', '丐帮', '铁掌帮', '五毒教',
  ],

  // 商会
  guilds: [
    '商会', '商盟', '联盟', '联盟会', '商社', '银号', '钱庄',
    '票号', '当铺', '镖局', '车马行', '客栈', '酒楼',
  ],
};

// ============================================================================
// 职业门派素材
// ============================================================================

export const PROFESSION_MATERIALS = {
  // 武侠职业
  martialArts: [
    '剑客', '刀客', '枪客', '棍客', '拳师', '掌门', '长老',
    '弟子', '传人', '弟子', '徒孙', '师尊', '师伯', '师叔',
  ],

  // 修仙职业
  cultivation: [
    '修士', '散修', '宗主', '长老', '弟子', '传人', '师尊',
    '炼丹师', '炼器师', '阵法师', '符箓师', '占卜师', '医者',
  ],

  // 世俗职业
  secular: [
    '书生', '秀才', '举人', '进士', '状元', '榜眼', '探花',
    '商人', '工匠', '农夫', '医者', '郎中', '大夫',
    '捕快', '衙役', '差役', '仵作', '师爷', '书吏',
  ],
};

// ============================================================================
// 成语俗语素材
// ============================================================================

export const IDIOM_MATERIALS = {
  // 常用成语
  idioms: [
    '画龙点睛', '锦上添花', '雪中送炭', '如虎添翼', '如鱼得水',
    '破釜沉舟', '背水一战', '卧薪尝胆', '忍辱负重', '韬光养晦',
    '三思而后行', '欲速则不达', '水滴石穿', '绳锯木断', '积少成多',
  ],

  // 常用俗语
  proverbs: [
    '谋事在人，成事在天', '谋事在人，成事在天', '谋事在人，成事在天',
    '谋事在人，成事在天', '谋事在人，成事在天', '谋事在人，成事在天',
  ],
};

// ============================================================================
// 素材库管理
// ============================================================================

export interface Material {
  id: string;
  category: MaterialCategory;
  title: string;
  content: string;
  tags: string[];
  source?: string;
  usageCount?: number;
}

/**
 * 获取指定分类的素材
 */
export function getMaterialsByCategory(category: MaterialCategory): any {
  switch (category) {
    case 'ancient':
      return ANCIENT_MATERIALS;
    case 'mythology':
      return MYTHOLOGY_MATERIALS;
    case 'writing':
      return WRITING_MATERIALS;
    case 'names':
      return NAME_MATERIALS;
    case 'titles':
      return TITLE_MATERIALS;
    case 'weapons':
      return WEAPON_MATERIALS;
    case 'skills':
      return SKILL_MATERIALS;
    case 'items':
      return ITEM_MATERIALS;
    case 'places':
      return PLACE_MATERIALS;
    case 'organizations':
      return ORGANIZATION_MATERIALS;
    case 'professions':
      return PROFESSION_MATERIALS;
    case 'idioms':
      return IDIOM_MATERIALS;
    default:
      return {};
  }
}

/**
 * 随机获取素材
 */
export function getRandomMaterial(category: MaterialCategory, subCategory?: string): string {
  const materials = getMaterialsByCategory(category);

  if (subCategory && materials[subCategory]) {
    const items = materials[subCategory] as string[];
    return items[Math.floor(Math.random() * items.length)];
  }

  const keys = Object.keys(materials);
  const randomKey = keys[Math.floor(Math.random() * keys.length)];
  const items = materials[randomKey] as string[];
  return items[Math.floor(Math.random() * items.length)];
}

/**
 * 生成随机姓名
 */
export function generateRandomName(gender: 'male' | 'female'): string {
  const surnames = NAME_MATERIALS[gender === 'male' ? 'maleSurname' : 'femaleSurname'];
  const names = NAME_MATERIALS[gender === 'male' ? 'maleName' : 'femaleName'];

  const surname = surnames[Math.floor(Math.random() * surnames.length)];
  const name = names[Math.floor(Math.random() * names.length)];

  return surname + name;
}

/**
 * 搜索素材
 */
export function searchMaterials(keyword: string): Material[] {
  const results: Material[] = [];

  const categories: MaterialCategory[] = [
    'ancient', 'mythology', 'writing', 'names', 'titles',
    'weapons', 'skills', 'items', 'places', 'organizations',
    'professions', 'idioms',
  ];

  for (const category of categories) {
    const materials = getMaterialsByCategory(category);
    for (const [subCategory, items] of Object.entries(materials)) {
      if (Array.isArray(items)) {
        for (const item of items) {
          if (item.includes(keyword)) {
            results.push({
              id: `${category}-${subCategory}-${item}`,
              category,
              title: item,
              content: item,
              tags: [subCategory],
            });
          }
        }
      }
    }
  }

  return results;
}

/**
 * 获取素材统计
 */
export function getMaterialStats() {
  let totalCount = 0;
  const categoryCount: Record<string, number> = {};

  const categories: MaterialCategory[] = [
    'ancient', 'mythology', 'writing', 'names', 'titles',
    'weapons', 'skills', 'items', 'places', 'organizations',
    'professions', 'idioms',
  ];

  for (const category of categories) {
    const materials = getMaterialsByCategory(category);
    let count = 0;
    for (const items of Object.values(materials)) {
      if (Array.isArray(items)) {
        count += items.length;
      }
    }
    categoryCount[category] = count;
    totalCount += count;
  }

  return {
    total: totalCount,
    categories: categoryCount,
    categoryCount: categories.length,
  };
}
