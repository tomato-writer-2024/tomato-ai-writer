/**
 * 番茄小说投稿攻略模块
 * 提供番茄小说平台的投稿指南、审核标准、签约政策等
 */

// ============================================================================
// 番茄小说平台信息
// ============================================================================

export const TOMATO_PLATFORM_INFO = {
  name: '番茄小说',
  company: '字节跳动',
  platformType: '免费阅读+广告+会员',
  readMode: '碎片化阅读，免费阅读为主',
  monetization: '广告分成+会员订阅+付费章节',
  audience: '年轻读者群体，偏爱爽文、快节奏、强代入感',
  features: [
    '算法推荐为主，完读率影响流量',
    '日更要求高，稳定更新是关键',
    '首章完读率60%以上更容易推荐',
    '签约门槛相对较低，适合新人',
    '免费阅读模式，读者粘性高',
  ],
};

// ============================================================================
// 热门题材
// ============================================================================

export const HOT_GENRES = {
  // 男频热门
  male: [
    {
      name: '都市爽文',
      tags: ['都市', '重生', '逆袭', '系统', '神医', '首富'],
      features: '快节奏、强爽点、打脸装逼',
      target: '18-35岁男性读者',
      avgLength: '100-200万字',
      popularElements: ['重生复仇', '系统金手指', '神医医术', '首富之路', '打脸爽文'],
    },
    {
      name: '玄幻爽文',
      tags: ['玄幻', '修仙', '升级', '打怪', '争霸'],
      features: '升级流、快节奏、热血爽文',
      target: '15-30岁男性读者',
      avgLength: '200-300万字',
      popularElements: ['废柴逆袭', '戒指老爷爷', '金手指', '打脸升级', '争霸天下'],
    },
    {
      name: '历史爽文',
      tags: ['历史', '穿越', '权谋', '争霸', '改革'],
      features: '权谋博弈、历史考据、智商在线',
      target: '20-40岁男性读者',
      avgLength: '150-250万字',
      popularElements: ['穿越历史', '权谋争霸', '科技兴国', '改革变法', '名垂青史'],
    },
    {
      name: '科幻爽文',
      tags: ['科幻', '未来', '星际', '进化', '系统'],
      features: '科技感、未来感、未知探索',
      target: '18-35岁男性读者',
      avgLength: '150-250万字',
      popularElements: ['星际争霸', '文明进化', '科技突破', '外星文明', '未来世界'],
    },
    {
      name: '系统爽文',
      tags: ['系统', '任务', '奖励', '升级', '金手指'],
      features: '任务驱动、奖励明确、升级爽快',
      target: '15-30岁男性读者',
      avgLength: '100-200万字',
      popularElements: ['系统任务', '奖励升级', '金手指', '打脸爽文', '系统商城'],
    },
  ],

  // 女频热门
  female: [
    {
      name: '甜宠文',
      tags: ['甜宠', '言情', '总裁', '豪门', '宠妻'],
      features: '甜度爆表、宠溺无度、幸福日常',
      target: '16-35岁女性读者',
      avgLength: '50-100万字',
      popularElements: ['总裁宠妻', '豪门甜宠', '一见钟情', '甜宠日常', '宠溺无度'],
    },
    {
      name: '重生逆袭',
      tags: ['重生', '逆袭', '复仇', '打脸', '虐渣'],
      features: '重生复仇、逆袭打脸、爽感十足',
      target: '18-35岁女性读者',
      avgLength: '80-150万字',
      popularElements: ['重生复仇', '逆袭打脸', '虐渣男', '手撕绿茶', '逆袭成功'],
    },
    {
      name: '古言权谋',
      tags: ['古言', '权谋', '宫斗', '复仇', '宅斗'],
      features: '权谋博弈、宫斗宅斗、智商在线',
      target: '20-40岁女性读者',
      avgLength: '100-200万字',
      popularElements: ['权谋宫斗', '复仇宅斗', '帝王之恋', '宫廷斗争', '权势争霸'],
    },
    {
      name: '穿越言情',
      tags: ['穿越', '言情', '种田', '经商', '发家'],
      features: '穿越异世、种田经商、发家致富',
      target: '18-35岁女性读者',
      avgLength: '80-150万字',
      popularElements: ['穿越异世', '种田经商', '发家致富', '医术济世', '美食经营'],
    },
    {
      name: '虐恋情深',
      tags: ['虐恋', '言情', '追妻', '救赎', '破镜重圆'],
      features: '虐恋情深、追妻火葬场、破镜重圆',
      target: '18-35岁女性读者',
      avgLength: '80-150万字',
      popularElements: ['虐恋情深', '追妻火葬场', '破镜重圆', '误会重重', '甜蜜和解'],
    },
  ],
};

// ============================================================================
// 审稿标准
// ============================================================================

export const REVIEW_STANDARDS = {
  // 基础要求
  basic: {
    originality: '原创度90%以上',
    format: '格式规范，标点正确',
    continuity: '逻辑连贯，不前后矛盾',
    readability: '语句通顺，阅读流畅',
  },

  // 内容要求
  content: {
    pacing: '节奏明快，不拖沓',
    shuangdian: '爽点密集，每章至少1个爽点',
    hook: '开头吸引人，3章内有小高潮',
    emotion: '情绪饱满，代入感强',
    consistency: '风格统一，前后一致',
  },

  // 商业要求
  commercial: {
    marketFit: '符合市场热点',
    uniqueness: '有独特卖点',
    completeness: '结构完整，情节饱满',
    potential: '有爆款潜力',
  },

  // 平台要求
  platform: {
    completionRate: '首章完读率目标60%+',
    updateFrequency: '日更2-4章，每章2000-3000字',
    totalLength: '100-300万字',
    interaction: '积极回复读者评论',
  },
};

// ============================================================================
// 签约政策
// ============================================================================

export const SIGNUP_POLICY = {
  // 签约条件
  conditions: {
    wordCount: '10万字以上可申请签约',
    quality: '质量评分80分以上',
    updateStability: '稳定更新30天以上',
    readerFeedback: '读者好评率70%以上',
  },

  // 签约福利
  benefits: [
    '全勤奖：日更4000字，每月1200-2000元',
    '分成比例：作者50%，平台50%',
    '推荐资源：签约作品优先推荐',
    '编辑指导：专业编辑一对一指导',
    '培训机会：定期举办写作培训',
    '版权运营：影视、动漫等版权开发',
  ],

  // 签约要求
  requirements: [
    '必须保证原创，严禁抄袭',
    '不得一稿多投',
    '必须稳定更新，断更需请假',
    '不得违反平台规则',
    '不得发布违法内容',
  ],

  // 签约类型
  types: [
    {
      name: '保底签约',
      description: '平台提供保底收入，分成比例50%',
      conditions: '作品质量高，作者有经验',
      benefits: '稳定收入，风险低',
    },
    {
      name: '分成签约',
      description: '按收入分成，分成比例50%',
      conditions: '新人作者，作品质量一般',
      benefits: '潜力大，上限高',
    },
    {
      name: '买断签约',
      description: '平台买断版权，一次性付清',
      conditions: '作品质量极高，平台看好',
      benefits: '一次性收入，无后续分成',
    },
  ],
};

// ============================================================================
// 避坑指南
// ============================================================================

export const PITFALLS_GUIDE = {
  // 常见错误
  commonMistakes: [
    {
      title: '开头拖沓',
      description: '前几章节奏太慢，读者看不下去',
      solution: '前3章必须抓住读者，快速进入主线',
    },
    {
      title: '爽点不足',
      description: '情节平淡，缺乏爽点',
      solution: '每章至少1个爽点，提高节奏',
    },
    {
      title: '逻辑混乱',
      description: '前后矛盾，逻辑不通',
      solution: '规划大纲，保持逻辑连贯',
    },
    {
      title: '人设崩塌',
      description: '人物性格不一致',
      solution: '设计人物小传，保持人设统一',
    },
    {
      title: '断更频繁',
      description: '更新不稳定，影响推荐',
      solution: '存稿至少10章，稳定更新',
    },
    {
      title: '节奏失控',
      description: '前期快后期慢，或者相反',
      solution: '规划节奏，保持稳定',
    },
    {
      title: '视角混乱',
      description: 'POV频繁切换，读者晕头转向',
      solution: '固定主角视角，减少视角切换',
    },
    {
      title: '灌水严重',
      description: '内容注水，质量下降',
      solution: '控制节奏，拒绝无意义内容',
    },
  ],

  // 平台禁忌
  taboos: [
    '严禁抄袭、复制他人作品',
    '严禁发布违法、违规内容',
    '严禁一稿多投',
    '严禁恶意刷量、刷评',
    '严禁传播虚假信息',
    '严禁侮辱、诽谤他人',
    '严禁涉及敏感话题',
    '严禁发布低俗内容',
  ],

  // 算法优化
  algorithm: [
    {
      factor: '完读率',
      weight: '40%',
      description: '首章完读率、整体完读率是关键',
      tips: '提高开篇质量，增加爽点密度',
    },
    {
      factor: '更新频率',
      weight: '20%',
      description: '稳定更新是算法推荐的基础',
      tips: '日更2-4章，保持稳定',
    },
    {
      factor: '互动率',
      weight: '15%',
      description: '读者评论、点赞、分享',
      tips: '积极回复评论，增加互动',
    },
    {
      factor: '留存率',
      weight: '15%',
      description: '读者持续阅读的比例',
      tips: '保持高质量，提高读者粘性',
    },
    {
      factor: '收藏率',
      weight: '10%',
      description: '读者收藏、关注的比例',
      tips: '提高开篇吸引力，增加收藏',
    },
  ],
};

// ============================================================================
// 新人扶持政策
// ============================================================================

export const NEW_AUTHOR_SUPPORT = {
  // 新人扶持计划
  plans: [
    {
      name: '新人扶持计划',
      description: '新人作者专属扶持计划',
      conditions: '首次在番茄发布作品',
      benefits: [
        '签约奖金：签约即得500元',
        '全勤加成：额外增加20%全勤',
        '推荐资源：新人作品优先推荐',
        '编辑指导：新人专属编辑一对一指导',
        '培训机会：免费参加新人培训',
      ],
    },
    {
      name: '潜力作者扶持',
      description: '潜力作者专项扶持',
      conditions: '作品质量高，有爆款潜力',
      benefits: [
        '签约奖金：签约即得1000元',
        '全勤加成：额外增加30%全勤',
        '重点推荐：重点推荐资源倾斜',
        '编辑指导：资深编辑一对一指导',
        '版权开发：优先考虑版权开发',
      ],
    },
  ],

  // 新人常见问题
  faqs: [
    {
      question: '新人如何快速签约？',
      answer: '首章完读率达到60%以上，稳定更新30天，读者好评率70%以上即可申请签约。',
    },
    {
      question: '如何提高首章完读率？',
      answer: '1. 开头3秒抓住读者 2. 黄金500字必须有爽点 3. 前3章要有小高潮 4. 人设鲜明有代入感 5. 节奏明快不拖沓',
    },
    {
      question: '新人可以写什么题材？',
      answer: '新人建议写热门题材（都市爽文、玄幻爽文、甜宠文等），市场需求大，签约门槛相对较低。',
    },
    {
      question: '如何保证原创性？',
      answer: '1. 不抄袭他人作品 2. 不使用相同套路 3. 独立创作 4. 使用AI辅助时进行原创性修改 5. 通过原创性检测',
    },
    {
      question: '断更了怎么办？',
      answer: '提前请假，说明原因，尽快恢复更新。长期断更会影响推荐和签约。',
    },
  ],
};

// ============================================================================
// 投稿流程
// ============================================================================

export const SUBMISSION_PROCESS = [
  {
    step: 1,
    title: '准备作品',
    description: '完成10万字以上，确保质量达标',
    requirements: [
      '完成10万字以上',
      '质量评分80分以上',
      '原创性90%以上',
      '首章完读率60%以上',
    ],
  },
  {
    step: 2,
    title: '提交申请',
    description: '在作者中心提交签约申请',
    requirements: [
      '填写基本信息',
      '上传作品封面',
      '填写作品简介',
      '提交前10章内容',
    ],
  },
  {
    step: 3,
    title: '审核等待',
    description: '等待编辑审核，一般3-7个工作日',
    requirements: [
      '保持稳定更新',
      '积极回复读者评论',
      '准备补充材料',
    ],
  },
  {
    step: 4,
    title: '签约洽谈',
    description: '审核通过后与编辑洽谈签约细节',
    requirements: [
      '确认签约类型',
      '确认分成比例',
      '确认更新要求',
      '确认版权条款',
    ],
  },
  {
    step: 5,
    title: '正式签约',
    description: '签署合同，正式成为签约作者',
    requirements: [
      '签署电子合同',
      '开始享受签约福利',
      '获得编辑指导',
      '进入推荐队列',
    ],
  },
];

// ============================================================================
// 收益计算
// ============================================================================

export const EARNINGS_CALCULATOR = {
  // 广告收益
  adRevenue: {
    formula: '收入 = 阅读量 × 广告单价 × 完读率系数',
    factors: [
      '阅读量：读者阅读的次数',
      '广告单价：每次阅读的广告收入（0.01-0.1元）',
      '完读率系数：完读率越高，系数越大（0.8-1.2）',
    ],
    example: '假设100万阅读量，广告单价0.05元，完读率系数1.0，收入 = 100万 × 0.05 × 1.0 = 50000元',
  },

  // 会员订阅
  memberRevenue: {
    formula: '收入 = 会员数 × 会员价格 × 分成比例',
    factors: [
      '会员数：购买会员的读者数量',
      '会员价格：每月会员价格（9.9元）',
      '分成比例：作者50%',
    ],
    example: '假设1000会员，会员价格9.9元，分成50%，收入 = 1000 × 9.9 × 50% = 4950元/月',
  },

  // 全勤奖
  attendanceReward: {
    formula: '全勤奖 = 日更字数 × 全勤单价',
    levels: [
      { name: '基础全勤', words: 4000, reward: 1200 },
      { name: '进阶全勤', words: 6000, reward: 1500 },
      { name: '高级全勤', words: 8000, reward: 2000 },
    ],
    example: '日更6000字，进阶全勤奖1500元/月',
  },

  // 预估收入
  estimate: (words: number, days: number, completionRate: number): number => {
    // 简化估算公式
    const totalWords = words * days; // 总字数
    const readers = totalWords / 10000; // 每1万字大约1个读者
    const revenue = readers * 0.5 * completionRate; // 每个读者0.5元，乘以完读率

    return Math.round(revenue);
  },
};

// ============================================================================
// 数据统计
// ============================================================================

export const PLATFORM_STATS = {
  // 平台数据
  platform: {
    totalReaders: '2亿+',
    totalAuthors: '100万+',
    totalWorks: '500万+',
    dailyReaders: '2000万+',
    dailyUpdate: '10亿+字',
  },

  // 作者收入
  authorIncome: {
    avg: '签约作者平均月收入：3000-5000元',
    top: '头部作者月收入：10万+',
    elite: '顶级作者月收入：100万+',
  },

  // 作品数据
  workStats: {
    avgLength: '平均字数：150万字',
    avgUpdate: '平均日更：5000字',
    avgDuration: '平均连载：10个月',
    successRate: '签约成功率：30%',
  },
};

// ============================================================================
// 投稿攻略导出
// ============================================================================

export function getSubmissionGuide() {
  return {
    platform: TOMATO_PLATFORM_INFO,
    hotGenres: HOT_GENRES,
    reviewStandards: REVIEW_STANDARDS,
    signupPolicy: SIGNUP_POLICY,
    pitfalls: PITFALLS_GUIDE,
    newAuthorSupport: NEW_AUTHOR_SUPPORT,
    process: SUBMISSION_PROCESS,
    earnings: EARNINGS_CALCULATOR,
    stats: PLATFORM_STATS,
  };
}

/**
 * 根据题材获取投稿建议
 */
export function getSubmissionAdviceByGenre(genre: string) {
  const advice: any = {
    hotGenres: HOT_GENRES,
    reviewStandards: REVIEW_STANDARDS,
  };

  // 根据题材提供具体建议
  if (genre.includes('都市')) {
    advice.tips = [
      '快节奏，每章2000-3000字',
      '爽点密集，每章至少1个爽点',
      '打脸装逼情节要经典',
      '人物性格要鲜明',
    ];
  } else if (genre.includes('玄幻')) {
    advice.tips = [
      '修炼体系要完整',
      '升级节奏要合理',
      '世界观要宏大',
      '打斗场面要精彩',
    ];
  } else if (genre.includes('甜宠')) {
    advice.tips = [
      '甜度要够，宠溺无度',
      '女主性格要讨喜',
      '男主要完美',
      '情节要甜蜜',
    ];
  }

  return advice;
}
