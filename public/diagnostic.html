<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç•ªèŒ„AI - è¿æ¥è¯Šæ–­</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f8fafc;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            width: 100%;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        h1 { color: #1e293b; margin-bottom: 8px; }
        .subtitle { color: #64748b; margin-bottom: 24px; }
        .section {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .section h3 { color: #1e293b; margin-bottom: 12px; font-size: 16px; }
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        .info-item:last-child { border-bottom: none; }
        .label { color: #64748b; font-size: 14px; }
        .value { color: #1e293b; font-weight: 500; font-size: 14px; }
        .value.success { color: #16a34a; }
        .value.error { color: #dc2626; }
        .value.warning { color: #ea580c; }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            margin-right: 8px;
            margin-bottom: 8px;
            transition: background 0.2s;
        }
        .btn:hover { background: #2563eb; }
        .btn.primary { background: #8b5cf6; }
        .btn.primary:hover { background: #7c3aed; }
        .url-box {
            background: #f1f5f9;
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 13px;
            margin-bottom: 8px;
            word-break: break-all;
        }
        .code {
            background: #1e293b;
            color: #86efac;
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>ğŸ” è¿æ¥è¯Šæ–­</h1>
            <p class="subtitle">æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥å’Œè®¿é—®æ–¹å¼</p>

            <div class="section">
                <h3>å½“å‰è¿æ¥ä¿¡æ¯</h3>
                <div class="info-item">
                    <span class="label">å½“å‰é¡µé¢URL</span>
                    <span class="value" id="currentUrl">-</span>
                </div>
                <div class="info-item">
                    <span class="label">åè®®</span>
                    <span class="value" id="protocol">-</span>
                </div>
                <div class="info-item">
                    <span class="label">ä¸»æœºå</span>
                    <span class="value" id="hostname">-</span>
                </div>
                <div class="info-item">
                    <span class="label">ç«¯å£</span>
                    <span class="value" id="port">-</span>
                </div>
                <div class="info-item">
                    <span class="label">æµè§ˆå™¨</span>
                    <span class="value" id="browser">-</span>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ“± å¯ç”¨çš„ç™»å½•æ–¹å¼</h3>

                <div style="margin-bottom: 20px;">
                    <p class="label" style="margin-bottom: 8px;">æ–¹å¼1: çº¯åŸç”Ÿç™»å½•é¡µé¢ï¼ˆæ¨èï¼‰</p>
                    <div class="url-box" id="standaloneUrl">-</div>
                    <a href="/standalone-login.html" class="btn primary" onclick="testUrl(event, '/standalone-login.html')">ğŸš€ ç«‹å³è®¿é—®</a>
                </div>

                <div style="margin-bottom: 20px;">
                    <p class="label" style="margin-bottom: 8px;">æ–¹å¼2: æ ‡å‡†ç™»å½•é¡µé¢</p>
                    <div class="url-box" id="adminLoginUrl">-</div>
                    <a href="/admin/login" class="btn" onclick="testUrl(event, '/admin/login')">ğŸ“ è®¿é—®</a>
                </div>

                <div style="margin-bottom: 20px;">
                    <p class="label" style="margin-bottom: 8px;">æ–¹å¼3: é¦–é¡µ</p>
                    <div class="url-box" id="homeUrl">-</div>
                    <a href="/" class="btn" onclick="testUrl(event, '/')">ğŸ  è®¿é—®</a>
                </div>
            </div>

            <div class="section">
                <h3>âš ï¸ å¸¸è§é—®é¢˜</h3>

                <div style="margin-bottom: 16px;">
                    <p class="label" style="margin-bottom: 4px;">é—®é¢˜: è®¿é—®æ—¶æ˜¾ç¤º404é”™è¯¯</p>
                    <p style="font-size: 13px; color: #64748b;">è§£å†³: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„URLï¼ŒåŒºåˆ†HTTPå’ŒHTTPS</p>
                </div>

                <div style="margin-bottom: 16px;">
                    <p class="label" style="margin-bottom: 4px;">é—®é¢˜: æ— æ³•è¿æ¥æœåŠ¡å™¨</p>
                    <p style="font-size: 13px; color: #64748b;">è§£å†³: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆç«¯å£5000ï¼‰</p>
                </div>

                <div style="margin-bottom: 16px;">
                    <p class="label" style="margin-bottom: 4px;">é—®é¢˜: é¡µé¢æ˜¾ç¤ºç©ºç™½</p>
                    <p style="font-size: 13px; color: #64748b;">è§£å†³: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œæˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼é‡è¯•</p>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ”§ æ‰‹åŠ¨è¯Šæ–­</h3>
                <p class="label" style="margin-bottom: 8px;">åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
                <div class="code">
// æ£€æŸ¥å½“å‰URL
console.log('å½“å‰URL:', window.location.href);

// æµ‹è¯•APIè¿æ¥
fetch('/api/auth/health', {
    method: 'GET',
    headers: { 'Content-Type': 'application/json' }
})
.then(r => r.json())
.then(data => console.log('APIå“åº”:', data))
.catch(e => console.error('APIé”™è¯¯:', e));
                </div>
            </div>
        </div>
    </div>

    <script>
        // è·å–å½“å‰URLä¿¡æ¯
        const url = new URL(window.location.href);
        document.getElementById('currentUrl').textContent = url.href;
        document.getElementById('protocol').textContent = url.protocol;
        document.getElementById('hostname').textContent = url.hostname;
        document.getElementById('port').textContent = url.port || (url.protocol === 'https:' ? '443' : '80');

        // æ£€æµ‹æµè§ˆå™¨
        const ua = navigator.userAgent;
        let browser = 'æœªçŸ¥æµè§ˆå™¨';
        if (/Edg/i.test(ua)) browser = 'Microsoft Edge';
        else if (/Chrome/i.test(ua) && !/Edg|OPR/i.test(ua)) browser = 'Chrome';
        else if (/Firefox/i.test(ua)) browser = 'Firefox';
        else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) browser = 'Safari';
        else if (/360SE|360EE/i.test(ua)) browser = '360æµè§ˆå™¨';
        else if (/QQBrowser/i.test(ua)) browser = 'QQæµè§ˆå™¨';
        document.getElementById('browser').textContent = browser;

        // ç”ŸæˆURL
        const baseUrl = url.origin;
        document.getElementById('standaloneUrl').textContent = baseUrl + '/standalone-login.html';
        document.getElementById('adminLoginUrl').textContent = baseUrl + '/admin/login';
        document.getElementById('homeUrl').textContent = baseUrl + '/';

        // æµ‹è¯•URL
        async function testUrl(event, path) {
            event.preventDefault();
            const url = window.location.origin + path;
            console.log('æµ‹è¯•è®¿é—®:', url);

            try {
                const response = await fetch(url, { method: 'HEAD' });
                console.log('å“åº”çŠ¶æ€:', response.status);

                if (response.ok) {
                    alert(`âœ… ${path} å¯æ­£å¸¸è®¿é—®ï¼Œå³å°†è·³è½¬...`);
                    window.location.href = url;
                } else {
                    alert(`âŒ ${path} è¿”å›é”™è¯¯: ${response.status} ${response.statusText}\n\nè¯·æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®`);
                }
            } catch (error) {
                alert(`âŒ æ— æ³•è¿æ¥åˆ° ${path}\n\né”™è¯¯: ${error.message}\n\nè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥`);
            }
        }
    </script>
</body>
</html>
